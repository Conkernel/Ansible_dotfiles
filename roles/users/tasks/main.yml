---





# tasks file for users
- name: Llamamos al detector de distros en caso de no existir la variable groups_sudo_group
  ansible.builtin.include_tasks: roles/groups/tasks/groups_sudo.yml
  when: not groups_sudo_group is defined

- name: "Crear usuario {{ users_user_name }} y meterlo al grupo {{ groups_sudo_group }}"
  ansible.builtin.user:
    state: present
    name: "{{ users_user_name }}"
    generate_ssh_key: true
    ssh_key_bits: 2048
    ssh_key_file: ".ssh/id_rsa"
    ssh_key_type: rsa
    create_home: true
    comment: "Usuario {{ users_user_name }}"
    append: true
    groups: "{{ groups_sudo_group }}"
    shell: /bin/zsh
    password: "{{ password }}"
     # 








# Revisar si realmente hace falta
- name: Crear el usuario ansible
  ansible.builtin.user:
    state: present
    name: ansible
    create_home: true
    comment: ansible
    shell: /bin/zsh


...
